<p id="notice"><%= notice %></p>

<h1>Personas Autorizadas</h1>
<%= form_tag enable_people_path, method: :get do %>
  <div class="form-row align-items-center">
      <div class="col-auto">
        <div class="input-group mb-2">
          <div class="form-group">
            <%= text_field_tag :dni, params[:name], class: "form-control", placeholder: "DNI", autofocus: true %>
          </div>
        </div>
      </div>

      <div class="col-auto">
        <div class="input-group mb-2">        
          <div class="form-group">
            <%= submit_tag "Buscar", name: nil, class: "btn btn-primary btn-md" %>
          </div>
        </div>
      </div>
  </div>
<% end %>
<table class="table table-hober">
  <thead>
    <tr>
      <th>Id</th>
      <th>Cliente</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Dni</th>
      <th>Estado</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @enable_people.each do |enable_person| %>
      <tr>
        <td><%= enable_person.id %></td>
        <td><%= enable_person.client.nombre + ' ' + enable_person.client.apellido %></td>
        <td><%= enable_person.nombre %></td>
        <td><%= enable_person.apellido %></td>
        <td><%= enable_person.dni %></td>
        <td>
          <% case enable_person.estado %>
            <% when 0 %>
              <p><span class="badge badge-info">Habilitado</span></p>
            <% when 1 %>
              <p><span class="badge badge-danger">Inhabilitado</span></p>
          <% end %>

        </td>
        <td><%= link_to 'Ver', enable_person, class: 'btn btn-success' %></td>
        <td><%= link_to 'Editar', edit_enable_person_path(enable_person), class: 'btn btn-info' %></td>
        <td><%= link_to 'Borrar', enable_person, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<% if can? :manage, EnablePerson%>
  <%= link_to 'Nueva Persona habilitada', new_enable_person_path, class: 'btn btn-outline-success' %>
<% end %>
